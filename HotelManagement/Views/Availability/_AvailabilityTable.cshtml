@model List<HotelManagement.Models.ViewModels.RoomAvailabilityViewModel>
@{
    var dates = (List<DateTime>)ViewBag.Dates;
    var startDate = (DateTime)ViewBag.StartDate;
    var days = (int)ViewBag.Days;
}

<form id="availabilityForm" class="mb-3">
    <input type="date" name="startDate" value="@startDate.ToString("yyyy-MM-dd")" />
    <input type="number" name="days" value="@days" min="1" max="30" />
    <button type="submit" class="btn btn-sm btn-primary">Pokaż</button>
</form>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Typ pokoju</th>
            @foreach (var date in dates)
            {
                <th>@date.ToString("dd.MM")</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var room in Model)
        {
            <tr>
                <td>@room.RoomTypeName</td>
                @foreach (var date in dates)
                {
                    var available = room.Availability.ContainsKey(date) ? room.Availability[date] : 0;
                    <td class="@(available == 0 ? "table-danger" : "table-success")">
                        @available
                    </td>
                }
            </tr>
        }
    </tbody>
</table>
